{"version":3,"sources":["main.js"],"names":["axios","require","Promise","resolve","value","then","_next","_throw","searchInput","fn","self","this","Handlebars","gen","registerHelper","args","exports","reject","err","asyncGeneratorStep","undefined","ratingEntries","querySelectorAll","window","Buffer","arguments","lengthContainer","document","querySelector","device","template","compile","getDevice","call","3","module","process","global","__argument0","__argument1","__argument2","__argument3","__filename","__dirname","items","myItems","item","g","Object","getOwnPropertyNames","indexOf","regeneratorRuntime","inputValue","filteredItems","hadRuntime","contentLoop","e","entry","addEventListener","./runtime","buffer","ratingsContext","4","ratingElement","target","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","asyncIterator","console","log","runtime","inModule","wrap","outerFn","Generator","generator","create","protoGenerator","context","Context","tryLocsList","_invoke","innerFn"],"mappings":"mgBAAA,wBAGMA,EAAQC,GAIdC,QAAAC,QAAAC,GAAAC,KAAAC,EAAAC,GAkBUC,EAAAA,QAdV,SAAAC,GACA,OAAA,WACA,IAAAC,EAAAC,kDAEAC,IAAUC,EAACC,EAAAA,MAAXJ,EAA0BK,GAA1B,SAAAT,EAAAF,GAIOY,EAAWH,EAAAV,EAAAc,EAAAX,EAAAC,EAAA,OAAAH,GAAA,SAAAG,EAAAW,GAAAC,EAAAN,EAAAV,EAAAc,EAAAX,EAAAC,EAAA,QAAAW,GAAAZ,OAAAc,SAORC,KAAAA,KAAAA,EAAAA,UAAyBC,oBAAAA,KAAiBZ,KAPlC,oBAAAa,OAAAA,OAAA,GAAAtB,EAAA,UAAAuB,OAAAC,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,iEAAA,+CAQRC,CAAAA,OAAAA,GAAAA,OAAAA,KAAkBC,EAAAA,CAAAA,SAASC,EAAAA,EAAcZ,gCAQvCa,EAAAA,QALFC,SAAsBC,6BAEtBC,QAAAA,MAIDC,KAAAtB,KAFDV,EAEO,UAAsB,oBAALS,KAAKA,KAAA,oBAAAa,OAAAA,OAAA,GAAAtB,EAAA,UAAAuB,OAAAC,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,sEAAA,+CACzBI,CAAAA,OAAAA,GAAAA,OAAS,KAAAK,EAAT,CAAA,SAAAjC,EAAAkC,EAAAnB,IACH,SAAAoB,EAAAC,EAAAb,EAAAc,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAMWC,IAAAA,EAAAA,WACVC,OAAAA,MAAoB,iBAALnC,MAAaA,KADlBkC,IAEZE,SAAKjB,cAALiB,GAIAF,EAAKG,EAAEF,oBA/BG,GA8BEG,OAAAC,oBA9BFF,GAAAG,QAAA,gDA4CT,GANDH,EAAAI,wBAAMC,EAINjB,EAAAnB,QAAMqC,EAAAA,aAELC,EAEGV,EAAAA,mBAAOS,OAGXE,WAEA7B,EAAAA,mBACH,MAAA8B,kCAMGC,KAAAA,KAAAA,EAAMC,UAA0B,oBAAThD,KAAkBA,KAAA,oBAAAa,OAAAA,OAAA,GAAAtB,EAAA,UAAAuB,OAAAC,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,wFAAA,wEACrC,CAAAkC,YAAA,EAAAC,OAAIC,GAAAA,OAAJ,KAAAC,EAAA,CAAA,SAAA7D,EAAAkC,EAAAnB,IACA,SAAAoB,EAAM2B,EAAAA,EAAazB,EAAS0B,EAA5BxB,EAAAC,EAAAC,EAAAC,IASA,SAAAN,GACIgB,aAEC,IAEDA,EAFCY,EAAAjB,OAFDkB,UAGHC,EAJDF,EAAAG,eAMCC,EAAA,mBAAAC,OAAAA,OAAA,8BACDT,EAAcQ,EAAGE,eAAA,kBACb3B,EAAOS,EAAAA,aAAAA,gBAEXmB,EAAYnB,iBAAJoB,EACR/C,EAAAA,EAAAA,mBAGA,GAAAgD,EACAC,IAGAxC,EAAAnB,QAAA0D,OAJA,EAaAA,EAAArC,EAAAc,mBAAAwB,EAAAxC,EAAAnB,QAAA,IAhGM4D,KAAAA,8uGAoGNrB,YAAAA,EAAWsB,GAAXA,EAAAX,qBAAAY,EAAAD,EAAAC,EAGHC,EA7CD/B,OAAAgC,OAAAC,EAAAf,WA8CHgB,EA/CD,IAAAC,EAAAC,GAAA,IAzDc,OAAAL,EAAAM,WAAAC,IAAA5E,IAAAwE,yiBAAAH,42DAqEN","file":"../app.js","sourcesContent":["// import Handlebars from 'handlebars';\n// import axios from 'axios';\nconst Handlebars = require('handlebars');\nconst axios = require('axios');\n\n// export const getDevice = resolution => {\n//     let device = 'Mobile';\n//     if(resolution >= 1024) {\n//         device = 'Desktop'\n//     } else if(resolution >= 720) {\n//         device = 'Tablet'\n//     }\n//     return device;\n// };\n\nHandlebars.registerHelper('toLowerCase', function(str) {\n    return str.toLowerCase();\n});\n\nmodule.exports = (async function (){\n    let html;\n    const url = 'https://static.usabilla.com/recruitment/apidemo.json';\n    const source = document.getElementById('row-template').innerHTML;\n    const contentLoop = document.getElementById('feedback-loop');\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const ratingEntries = document.querySelectorAll('.ratings__button');\n    const lengthContainer = document.querySelector('.length');\n    // let length = 0;\n\n    const template = Handlebars.compile(source);\n    \n    const getDevice = resolution => {\n        let device = 'Mobile';\n        if(resolution >= 1024) {\n            device = 'Desktop'\n        } else if(resolution >= 720) {\n            device = 'Tablet'\n        }\n        return device;\n    };\n    \n    const feedback = await axios.get(url);\n\n    const { data: { items } } = feedback;\n    const myItems = items.map(item => {\n        item.device = getDevice(item.viewport.width);\n        return item;\n    })\n    const context = {\n        items: myItems\n    };\n    html = template(context);\n    contentLoop.innerHTML = html;\n\n    const searchFn = event => {\n        event.preventDefault();\n        const inputValue = searchInput.value;\n\n        const regEx = new RegExp(inputValue, 'i');\n\n        const filteredItems = myItems.filter(item => {\n            return regEx.test(item.comment)\n        })\n        const context = {\n            items: filteredItems\n        };\n        html = template(context);\n        contentLoop.innerHTML = html;\n        \n        lengthContainer.innerHTML = filteredItems.length;\n    }\n\n    searchForm.addEventListener('submit', searchFn);\n    searchInput.addEventListener('input', searchFn);\n\n    ratingEntries.forEach(entry => {\n        entry.addEventListener('click', event => {\n            let ratingsContext;\n            const ratingElement = event.target;\n            \n            ratingElement.classList.toggle('ratings__button--selected');\n            const selectedRatingButtonList = document.querySelectorAll('.ratings__button--selected');\n\n            const pickedRatings = Array.from(selectedRatingButtonList).map(element => parseInt(element.getAttribute('data-rating')));\n\n            let filteredItems = [];\n\n            if(pickedRatings.length > 0) {\n                filteredItems = myItems.filter(item => {\n                    return pickedRatings.includes(item.rating);\n                })\n            } else {\n                filteredItems = myItems;\n            }\n            ratingsContext = {\n                items: filteredItems\n            };\n            console.log(filteredItems.length);\n            lengthContainer.innerHTML = filteredItems.length;\n\n            // if(element.classList.contains('ratings__button--selected')) {\n            //     const filteredItems = myItems.filter(item => {\n            //         return picked.includes(item.rating.toString());\n            //     })\n            //     context = {\n            //         items: filteredItems\n            //     };\n            //     console.log(filteredItems.length);\n            //     lengthContainer.innerHTML = filteredItems.length;\n            // } else {\n            //     context = {\n            //         items: myItems\n            //     }\n            //     console.log(items.length);\n            //     lengthContainer.innerHTML = items.length;\n            // }\n            \n            html = template(ratingsContext);\n            contentLoop.innerHTML = html;\n            \n            \n        })\n    })\n\n    console.log(items.length);\n    lengthContainer.innerHTML = items.length;\n    // module.exports = { template };\n}());"]}