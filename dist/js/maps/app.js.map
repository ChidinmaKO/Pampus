{"version":3,"sources":["main.js"],"names":["Handlebars","registerHelper","Promise","resolve","value","then","_next","_throw","device","fn","self","this","args","arguments","reject","url","apply","contentLoop","searchForm","document","getElementById","lengthContainer","template","compile","source","err","undefined","call","require","window","Buffer","process","__argument0","__argument1","__argument2","__argument3","__filename","__dirname","feedback","obj","default","items","myItems","3","item","module","exports","getDevice","viewport","event","searchInput","inputValue","Function","regEx","hadRuntime","context","filteredItems","innerHTML","regeneratorRuntime","entry","addEventListener","g","ratingElement","e","./runtime","buffer","rH1JPG","4","global","html","Op","Object","prototype","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime"],"mappings":"mgBAAMA,wBAGNA,EAAWC,GAAXC,QAAAC,QAAAC,GAAAC,KAAAC,EAAAC,GAqBYC,EAAAA,QAjBM,SAAAC,GAAA,OAAA,WAAA,IAAAC,EAAAC,KAAAC,EAAAC,UAAA,OAAA,IAAAX,QAAA,SAAAC,EAAAW,GAERC,IAAAA,EAAMN,EAAAO,MAAAN,EAAAE,GAENK,SAAAA,EAJQb,GAKRc,EAAaC,EAASC,EAAAA,EAAed,EAAAC,EAL7B,OAAAH,GAQRiB,SAAAA,EAAAA,GAEAC,EAAWtB,EAAWuB,EAAQC,EAVtBlB,EAAAC,EAAA,QAAAkB,GAaVnB,OAAAoB,SAKCC,KAAAhB,KAAAiB,EAAA,UAAA,oBAAAlB,KAAAA,KAAA,oBAAAmB,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAjB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,iEAAA,0FACD,SAAAkB,EAAOvB,EAAPsB,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAGEC,EAAAA,QAFL,SApBaC,6BAAAC,QAAAD,MAwBEE,KAAAA,KAAAA,EAAYH,UAxBd,oBAAA5B,KAAAA,KAAA,oBAAAmB,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAjB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,sEAAA,+CAyBR6B,CAAAA,OAAAA,GAAAA,OAAUD,KAAAE,EAAU,CAAA,SAAAC,EAAQC,EAAAC,IAC9BF,SAAAA,EAAKpC,EAASuC,EAAAA,EAAeC,EAA7Bd,EAAAC,EAAAC,EAAAC,GAUAY,IAAAA,EAAAA,WACA,OAAAtC,MAAmBuC,iBAAbC,MAANzC,KADAuC,IAGAG,SAAMC,cAAND,GAKAE,EAAMC,EAAAA,oBACKC,GAAPf,OAAAA,oBAAOe,GAAAA,QAAAA,sBAGXvC,EAAAA,GAAYwC,EAAZC,mBASAC,+BAHJT,EAAAA,QAAAA,EAAYU,aAGRD,EAEIE,EAAAH,mBAAMI,OAKN,WAAsED,EAAAH,mBAAA,MAAAK,GAEtEF,EAAAH,wBAAIF,KAII7B,KAAAhB,KAAAiB,EAAA,UAAO,oBAAalB,KAApBA,KAAA,oBAAAmB,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAjB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,wFAAA,wEACH,CAAAmD,YAAA,EAFeC,OAAhB,GAAAC,OAAA,KAAAC,EAAA,CAAA,SAAAvC,EAAAiB,EAAAC,IAGH,SAAAf,EAJDqC,EAIOtC,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,IAQPgC,SAAAA,GACApD,aAIP,MAAAqD,EA7BDC,OAAAC,UA+BAnD,EAAAA,EAAAA,eAvFcoD,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,gBAAAC,EAAA,iBAAApC,EAAlBqC,EAAAd,EAAAV,o1LAgFYW","file":"../app.js","sourcesContent":["const Handlebars = require('handlebars');\nconst axios = require('axios');\n\nHandlebars.registerHelper('toLowerCase', function(str) {\n    return str.toLowerCase();\n});\n\nmodule.exports = (async function (){\n    let html;\n    const url = 'https://static.usabilla.com/recruitment/apidemo.json';\n    const source = document.getElementById('row-template').innerHTML;\n    const contentLoop = document.getElementById('feedback-loop');\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const ratingEntries = document.querySelectorAll('.ratings__button');\n    const lengthContainer = document.querySelector('.length');\n    \n    const template = Handlebars.compile(source);\n    \n    const getDevice = resolution => {\n        let device = 'Mobile';\n        if(resolution >= 1024) {\n            device = 'Desktop'\n        } else if(resolution >= 720) {\n            device = 'Tablet'\n        }\n        return device;\n    };\n    \n    const feedback = await axios.get(url);\n\n    const { data: { items } } = feedback;\n    const myItems = items.map(item => {\n        item.device = getDevice(item.viewport.width);\n        return item;\n    })\n    const context = {\n        items: myItems\n    };\n    html = template(context);\n    contentLoop.innerHTML = html;\n\n    const searchFn = event => {\n        event.preventDefault();\n        const inputValue = searchInput.value;\n\n        const regEx = new RegExp(inputValue, 'i');\n\n        const filteredItems = myItems.filter(item => {\n            return regEx.test(item.comment)\n        })\n        const context = {\n            items: filteredItems\n        };\n        html = template(context);\n        contentLoop.innerHTML = html;\n        \n        lengthContainer.innerHTML = filteredItems.length;\n    }\n\n    searchForm.addEventListener('submit', searchFn);\n    searchInput.addEventListener('input', searchFn);\n\n    ratingEntries.forEach(entry => {\n        entry.addEventListener('click', event => {\n            let ratingsContext;\n            const ratingElement = event.target;\n            \n            ratingElement.classList.toggle('ratings__button--selected');\n            const selectedRatingButtonList = document.querySelectorAll('.ratings__button--selected');\n\n            const pickedRatings = Array.from(selectedRatingButtonList).map(element => parseInt(element.getAttribute('data-rating')));\n\n            let filteredItems = [];\n\n            if(pickedRatings.length > 0) {\n                filteredItems = myItems.filter(item => {\n                    return pickedRatings.includes(item.rating);\n                })\n            } else {\n                filteredItems = myItems;\n            }\n            ratingsContext = {\n                items: filteredItems\n            };\n            lengthContainer.innerHTML = filteredItems.length;\n            \n            html = template(ratingsContext);\n            contentLoop.innerHTML = html;\n            \n            \n        })\n    })\n\n    lengthContainer.innerHTML = items.length;\n\n}());"]}