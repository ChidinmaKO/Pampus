{"version":3,"sources":["main.js"],"names":["module","exports","fn","resolution","device","arguments","resolve","reject","gen","apply","self","args","asyncGeneratorStep","_next","_throw","value","undefined","call","this","require","window","Buffer","buffer","rH1JPG","2","process","global","__argument0","__argument1","__argument2","__argument3","__filename","__dirname","ratingEntries","obj","url","__esModule","source","lengthContainer","querySelector","length","3","template","Handlebars","compile","g","context","items","searchFn","event","oldRuntime","regEx","RegExp","html","regeneratorRuntime","filteredItems","searchForm","searchInput","entry","addEventListener","selectedElements","querySelectorAll","document","./runtime","Array","console","Symbol","iterator","asyncIteratorSymbol","$Symbol","asyncIterator","toStringTag","inModule","contentLoop","runtime","wrap","innerFn","outerFn","tryLocsList"],"mappings":"6jBAiBCA,EAAAC,QAbG,SAAAC,qBACA,IAAGC,EAAAA,KACCC,EAASC,UADb,OAEO,IAAGF,QAAU,SAASG,EAAAC,GACzBH,IAAMI,EAAGN,EAAAO,MAATC,EAAAC,iBAEJC,EAAAJ,EAAAF,EAAAC,EAAAM,EAAAC,EAAA,OAAAC,wCAGJF,OAAAG,SAICC,KAAAC,KAAAC,EAAA,UAAA,oBAAAT,KAAAA,KAAA,oBAAAU,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,iEAAA,+CAAA,CAAAiB,OAAA,GAAAC,OAAA,KAAAC,EAAA,CAAA,SAAAL,EAAAnB,EAAAC,IAAA,SAAAwB,EAAAC,EAAAL,EAAAM,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAOSC,EAAAA,QAPT,SAAAC,GAESC,OAAAA,GAAMD,EAAAE,WAAAF,EAAA,CACNG,QAAAA,MAKAC,KAAAA,KAAAA,EAAAA,UAA2BC,oBAAAA,KARpC7B,KAAA,oBAAAU,OAAAA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,sEAAA,+CASOmC,CAAAA,OAAAA,GAAAA,OATP,KAAAC,EAAA,CAAA,SAAAtB,EAAAnB,EAAAC,IAWSyC,SAAAA,EAXThB,EAWoBiB,EAAAA,EAAWC,EAX/Bf,EAAAC,EAAAC,EAAAC,GAoBI,IAAAa,EAAA,WACKC,OAAAA,MAAU,iBAAApC,MAAAA,KADf,IAEGqC,SAAK,cAALA,2BAKsB,GAApBC,OAAAA,oBAAWH,GAAXG,QAAWC,sBAIbC,EAAMC,GAAYC,EAAAA,mBAQlBC,GAJCR,EAAAS,wBAFDtC,EAII+B,EAAAA,QAAAA,EAAOQ,aAEXF,EAGAf,EAAAA,mBAAAA,OAGJkB,WACAC,EAAAA,mBAEAxB,MAAAA,GACIyB,EAAAA,wBAAMC,KAKF1C,KAAAC,KAAAC,EAAMyC,UAA4BC,oBAATC,KAASD,KAAiB,oBAAAzC,OAAnDA,OAAA,GAAAD,EAAA,UAAAE,OAAAhB,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAAA,UAAA,GAAA,wFAAA,wEAEA,CAAA0D,YAAA,EAAAzC,OAAY,GAAG0C,OAAWJ,KAAAA,EAAAA,CAAAA,SAAXzC,EAAoCnB,EAAAC,IAC/C,SAAAwB,EAAAC,EAAAL,EAAAM,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,IAMI,SAAAN,GACA,aAEJoB,IAAU9B,EAAV8B,EAAAA,OAAAA,UACIC,EAAAA,EAAAA,eAEJkB,EAAYV,mBAALW,OAAmB1B,OAA1B,GACAF,EAAAA,EAAe6B,UAAf,aACHC,EAAMC,EAAAC,eAAA,kBACHxB,EAAUuB,EAAAE,aAAA,gBAAAC,EAAV,iBAAAxE,EAGAiE,EAAAA,EAAOX,mBACPhB,GAAAA,EACHkC,IAGDC,EAAAA,QAAAA,OAJInC,EA5EfoC,EAAAhD,EAAA4B,mBAAAkB,EAAAxE,EAAAC,QAAA,muGAAA,SAAA0E,EAAAC,EAAAC,EAAAnE,EAAAoE,8gFA+DmB","file":"../app.js","sourcesContent":["import Handlebars from 'handlebars';\nimport axios from 'axios';\n\nexport const getDevice = resolution => {\n    let device = 'Mobile';\n    if(resolution >= 1024) {\n        device = 'Desktop'\n    } else if(resolution >= 720) {\n        device = 'Tablet'\n    }\n    return device;\n};\n\nHandlebars.registerHelper('toLowerCase', function(str) {\n    return str.toLowerCase();\n});\n\n(async function (){\n    let html;\n    const url = 'https://static.usabilla.com/recruitment/apidemo.json';\n    const source = document.getElementById('row-template').innerHTML;\n    const contentLoop = document.getElementById('feedback-loop');\n    const searchForm = document.getElementById('searchForm');\n    const searchInput = document.getElementById('searchInput');\n    const ratingEntries = document.querySelectorAll('[id^=\"rating\"]');\n    const lengthContainer = document.querySelector('.length');\n    let length = 0;\n\n    const template = Handlebars.compile(source);\n    \n    \n    const feedback = await axios.get(url);\n\n    const { data: { items } } = feedback;\n    const myItems = items.map(item => {\n        item.device = getDevice(item.viewport.width);\n        return item;\n    })\n    const context = {\n        items: myItems\n    };\n    html = template(context);\n    contentLoop.innerHTML = html;\n\n    const searchFn = event => {\n        event.preventDefault();\n        const inputValue = searchInput.value;\n\n        const regEx = new RegExp(inputValue, 'i');\n\n        const filteredItems = myItems.filter(item => {\n            return regEx.test(item.comment)\n        })\n        const context = {\n            items: filteredItems\n        };\n        html = template(context);\n        contentLoop.innerHTML = html;\n        \n        lengthContainer.innerHTML = filteredItems.length;\n    }\n\n    searchForm.addEventListener('submit', searchFn);\n    searchInput.addEventListener('input', searchFn);\n\n    ratingEntries.forEach(entry => {\n        entry.addEventListener('click', event => {\n            let context;\n            const element = event.target;\n            \n            element.classList.toggle('ratings__button--selected');\n            const selectedElements = document.querySelectorAll('.ratings__button--selected');\n\n            const picked = Array.from(selectedElements).filter(element => {\n                // console.log(selectedElements);\n                return element.classList.contains('ratings__button--selected');\n            }).map(element => element.textContent);\n\n            if(element.classList.contains('ratings__button--selected')) {\n                const filteredItems = myItems.filter(item => {\n                    // console.log(selectedElements.length);\n                    return picked.includes(item.rating.toString());\n                })\n                context = {\n                    items: filteredItems\n                };\n                console.log(filteredItems.length);\n                lengthContainer.innerHTML = filteredItems.length;\n            } else {\n                context = {\n                    items: myItems\n                }\n                console.log(items.length);\n                lengthContainer.innerHTML = items.length;\n            }\n            \n            html = template(context);\n            contentLoop.innerHTML = html;\n            \n            \n        })\n    })\n\n    console.log(items.length);\n    lengthContainer.innerHTML = items.length;\n    // module.exports = { template };\n}());"]}